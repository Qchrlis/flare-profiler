(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dbfaa75a"],{6539:function(t,e,s){},"6edd":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"session"},[s("div",{attrs:{id:"cpu_time_content"}},t._l(t.threads,function(e,a){return s("div",{staticClass:"echarts_bar",class:{selected:t.selected_thread_id==e.id},on:{click:function(s){return t.select_thread(e.id)}}},[s("div",{staticClass:"thread_name",attrs:{title:e.name}},[t._v(t._s(e.name))]),s("div",{staticClass:"thread_bar",attrs:{id:"thread_cpu_chart_"+e.id}})])}),0)])},i=[],n=void 0,r={name:"cpu",data:function(){return{threads:[],selected_thread_id:null}},computed:{sampleInfo:function(){return this.$store.state.sampleInfo},exampleInfo:function(){return this.$store.state.exampleInfo},sessionThreads:function(){return this.$store.state.sessionThreads},sessionId:function(){return this.$route.params.sessionInfo},sessionCpuTimes:function(){return this.$store.state.sessionCpuTimes},historySamples:function(){return this.$store.state.historySamples}},mounted:function(){this.on_cpu_time_result()},created:function(){this.getThreads()},methods:{select_thread:function(t){this.selected_thread_id=t},getThreads:function(){this.sessionId&&this.sessionThreads&&(this.threads=this.sessionThreads.get(this.sessionId)),this.historySamples.length<=0&&this.$router.push({path:"/samples"})},on_cpu_time_result:function(){var t=this,e=this.sessionCpuTimes.get(this.sessionId);if(!e)return!1;for(var s=this.sampleInfo.record_start_time,a=this.sampleInfo.last_record_time,i=this.sampleInfo.unit_time_ms,n=function(n){var r=e[n];if(r.total_cpu_time>0){var o=t.fill_ts_data(r.ts_data,r.start_time,r.end_time,s,a,i),d=t.create_echarts_bar("thread_cpu_chart_"+r.id,o);d.on("datazoom",function(e){var a=d.getModel().option.xAxis[0],n=s+a.rangeStart*i,o=s+a.rangeEnd*i;console.log("datazoom: thread:",r.id,", index:",a.rangeStart,"-",a.rangeEnd,", time:",n,"-",o),t.update_call_stack_tree(r.id,n,o)})}},r=0;r<e.length;r++)n(r)},update_call_stack_tree:function(t,e,s){var a={cmd:"flame_graph",options:{session_id:this.sessionId,thread_id:t,start_time:e,end_time:s}};this.$webSocket.webSocketSendMessage(JSON.stringify(a))},create_echarts_bar:function(t,e){if(!e){e=[];for(var s=0;s<3e3;s++)e.push(1e3*Math.random().toFixed(2))}var a={dataZoom:[{type:"inside",start:0,end:10,moveOnMouseMove:!1,moveOnMouseWheel:!1,zoomOnMouseWheel:!1},{type:"slider",dataBackground:{lineStyle:{color:"#409eff",opacity:1},areaStyle:{color:"#3a8ee6",opacity:.3}},realtime:!1,filterMode:"empty",top:"top",left:"left"}],xAxis:{data:e,show:!1},yAxis:{show:!1},series:[{type:"bar",data:e,large:!0,largeThreshold:50,itemStyle:{color:"#e74911",opacity:0}}]},i=this.$echarts.init(document.getElementById(t));return i.setOption(a),i},fill_ts_data:function(t,e,s,a,i,n){var r=(e-a)/n,o=(i-s)/n;if(r<1&&o<1)return t;for(var d=[],c=0;c<r;c++)d.push(0);d=d.concat(t);for(c=0;c<o;c++)d.push(0);return d}},watch:{$route:function(t,e){n.on_cpu_time_result(),n.getThreads(),n.sessionThreads||n.$router.push("/samples")}}},o=r,d=(s("e0cd"),s("2877")),c=Object(d["a"])(o,a,i,!1,null,"44523672",null);e["default"]=c.exports},e0cd:function(t,e,s){"use strict";var a=s("6539"),i=s.n(a);i.a}}]);
//# sourceMappingURL=chunk-dbfaa75a.0d5fe584.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8a5c1a1a"],{2756:function(t,e,s){"use strict";var i=s("5d5e"),o=s.n(i);o.a},"5d5e":function(t,e,s){},"6edd":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cpu_time_content",staticStyle:{width:"100%"}},[s("el-table",{ref:"cpuTable",staticStyle:{cursor:"pointer"},attrs:{data:t.threads,"highlight-current-row":""},on:{"row-click":t.selectCurRow}},[s("el-table-column",{attrs:{width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.name))])]}}])}),s("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(t){return[s("div",{staticClass:"thread_bar",attrs:{id:"thread_cpu_chart_"+t.row.id}})]}}])})],1)],1)},o=[],n=void 0,r={name:"cpu",data:function(){return{threads:[],selected_thread_id:null}},computed:{sampleInfo:function(){return this.$store.state.sampleInfo},exampleInfo:function(){return this.$store.state.exampleInfo},sessionThreads:function(){return this.$store.state.sessionThreads},sessionId:function(){return this.$route.params.sessionInfo},sessionCpuTimes:function(){return this.$store.state.sessionCpuTimes},historySamples:function(){return this.$store.state.historySamples},sessionTabsValue:function(){return this.$store.state.sessionTabsValue},selectCpuRow:function(){return this.$store.state.selectCpuRow}},mounted:function(){var t=this;this.$nextTick(function(){t.on_cpu_time_result()})},created:function(){this.getThreads()},methods:{selectCurRow:function(t,e,s){var i=this;console.log("row",t),console.log("column",e),console.log("event",s);var o=this.sessionTabsValue.filter(function(t){if(t.sessionId!=i.sessionId)return t}),n={sessionId:this.sessionId,tabsValue:"call"};o.push(n),this.$store.commit("session_tabs_value",o);var r=this.selectCpuRow.filter(function(t){if(t.sessionId!=i.sessionId)return t}),a={sessionId:this.sessionId,selectRow:t};r.push(a),this.$store.commit("select_cpu_row",r),this.$router.push({path:"/"+this.sessionId+"/call"})},select_thread:function(t){this.selected_thread_id=t},getThreads:function(){var t=this;if(this.sessionId&&this.sessionThreads.length>0){var e=this.sessionThreads.filter(function(e){if(e.sessionId==t.sessionId)return e});e.length>0&&(this.threads=e[0].threads)}this.historySamples.length<=0&&this.$router.push({path:"/samples"})},on_cpu_time_result:function(){var t=this,e=this.sessionCpuTimes.filter(function(e){if(e.sessionId==t.sessionId)return e}),s=e[0].cpuTimeData;if(!s)return!1;for(var i=this.sampleInfo.record_start_time,o=this.sampleInfo.last_record_time,n=this.sampleInfo.unit_time_ms,r=0;r<s.length;r++){var a=s[r];if(a.total_cpu_time>0){var u=this.fill_ts_data(a.ts_data,a.start_time,a.end_time,i,o,n);this.create_echarts_bar("thread_cpu_chart_"+a.id,u)}}var l=this.selectCpuRow.filter(function(e){if(e.sessionId==t.sessionId)return e});l.length>0&&this.$refs.cpuTable.setCurrentRow(l[0].selectRow)},update_call_stack_tree:function(t,e,s){var i={cmd:"flame_graph",options:{session_id:this.sessionId,thread_id:t,start_time:e,end_time:s}};this.$webSocket.webSocketSendMessage(JSON.stringify(i))},create_echarts_bar:function(t,e){if(!e){e=[];for(var s=0;s<3e3;s++)e.push(1e3*Math.random().toFixed(2))}var i={dataZoom:[{type:"inside",start:0,end:0,moveOnMouseMove:!1,moveOnMouseWheel:!1,zoomOnMouseWheel:!1,disabled:!0},{type:"slider",dataBackground:{lineStyle:{color:"#409eff",opacity:1},areaStyle:{color:"#3a8ee6",opacity:.3}},realtime:!1,filterMode:"empty",top:"top",left:"left",fillerColor:"",handleStyle:{opacity:0,shadowBlur:0}}],xAxis:{data:e,show:!1},yAxis:{show:!1},series:[{type:"bar",data:e,large:!0,largeThreshold:50,itemStyle:{color:"#e74911",opacity:0}}]},o=this.$echarts.init(document.getElementById(t));return o.setOption(i),o},fill_ts_data:function(t,e,s,i,o,n){var r=(e-i)/n,a=(o-s)/n;if(r<1&&a<1)return t;for(var u=[],l=0;l<r;l++)u.push(0);u=u.concat(t);for(l=0;l<a;l++)u.push(0);return u}},watch:{$route:function(t,e){n.on_cpu_time_result(),n.getThreads(),n.sessionThreads||n.$router.push("/samples")}}},a=r,u=(s("2756"),s("2877")),l=Object(u["a"])(a,i,o,!1,null,"eca48dd0",null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-8a5c1a1a.9fc3ca1a.js.map